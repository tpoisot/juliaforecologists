<!DOCTYPE html>
<html>
<head>
  <meta name="author" content="Timothée Poisot">
  <meta charset="utf-8">
  <title>Julia for ecologists :: Models of competition</title>
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all">
  <link href="css/custom.css" rel="stylesheet" type="text/css" media="all">
  <script src="js/jquery-2.0.3.min.js" type="text/javascript"></script>
  <script src="js/bootstrap.min.js" type="text/javascript"></script>
  <script src="js/list.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
  <div id="topbar" style="z-index: 3">
    <div class="container">
      <div class="row">
        <ul>
          <li><div id="pkgname"> </div></li>
          <li><a href="">Code</a></li>
          <li><a href="/issues">Issues</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container" style="z-index: auto">
    <div class="row">
      <div class="col-sm-9">
      <div id="body-content">
<p>In this example, we will build simple models of competition between two species.</p>
<h1 id="one-population">One population</h1>
<p>Let us first define a function for logistic growth. This function will return the growth rate of a population of size <code>N</code> as a function of its growth rate <code>r</code> and intraspecific competition rate <code>q</code>.</p>
<div class="sourceCode"><pre class="sourceCode julia julia"><code class="sourceCode julia"><span class="kw">function</span> dNdt(N::<span class="dt">Float64</span>, r::<span class="dt">Float64</span>, q::<span class="dt">Float64</span>)
  <span class="kw">return</span> N * (r - q * N)
<span class="kw">end</span></code></pre></div>
<pre class="output"><code>dNdt (generic function with 1 method)</code></pre>
<h2 id="testing-the-model">Testing the model</h2>
<p>How much would a population of size 1 grow over a single timestep, if there is no intraspecific competition at all?</p>
<div class="sourceCode"><pre class="sourceCode julia julia"><code class="sourceCode julia">dNdt(<span class="fl">1.0</span>, <span class="fl">1.1</span>, <span class="fl">0.0</span>)</code></pre></div>
<pre class="output"><code>1.1</code></pre>
<p>Let us simulate this model over 10 timesteps:</p>
<div class="sourceCode"><pre class="sourceCode julia julia"><code class="sourceCode julia">N = <span class="dt">Array</span>(<span class="dt">Float64</span>, <span class="fl">10</span>)
N[<span class="fl">1</span>] = <span class="fl">1.0</span>
<span class="kw">for</span> i = <span class="fl">2</span>:length(N)
  N[i] = N[i-<span class="fl">1</span>] + dNdt(N[i-<span class="fl">1</span>], <span class="fl">1.1</span>, <span class="fl">0.3</span>)
<span class="kw">end</span></code></pre></div>
<p>There are a few things going on in this snippet. Let's look at them line by line.</p>
<dl>
<dt><code>N = Array(Float64, 10)</code></dt>
<dd>We know that we want 10 timesteps, and that the type of data returned by our <code>dNdt</code> function is <code>Float64</code>. This line creates an <em>empty</em> array of the right size and data type. It is not, strictly speaking, necessary. But, <em>pre-allocation</em> of arrays (this is what we're doing here) can increase performance significantly. It is good practice.
</dd>
<dt><code>N[1] = 1.0</code></dt>
<dd>We need to define an <em>initial</em> value for the population size. Since Julia indexes arrays starting from 1 (like R, unlike Python or C), we put the initial population size in <code>N[1]</code>.
</dd>
<dt><code>for i = 2:length(N)</code></dt>
<dd>This line will start a <em>loop</em>. The variable <code>i</code> will be incremented from <code>2</code> (because we know the population size at time 1) to <code>length(N)</code> (which we know is 10, but this is safer in case we want to change the number of timesteps).
</dd>
<dt><code>N[i] = N[i-1] + dNdt(N[i-1], 1.1, 0.3)</code></dt>
<dd>This is the core of our loop. It will look at the population state at time <code>i-1</code> (since the loop start at 2, it will first look at 1, and so on). This line essentially performs the operation of <em>N(t+1) = N(t) + dN(t)/dt</em>.
</dd>
<dt><code>end</code></dt>
<dd>Finally, this line indicates that this is the end of the loop. Blocks in Julia are delimited by a final <code>end</code>.
</dd>
</dl>
<h2 id="solving-integration-issues">Solving integration issues</h2>
<h1 id="two-populations">Two populations</h1>
        <hr>
      </div>
      </div>

      <div class="col-sm-offset-9" style="z-index: 2">
        <div id="table-of-contents">
          <div id="table-of-contents-content">

            <ul class="toc list nav"><li>
                <a class="toc-item toc-current-doc" href="02_competition.html">Models of competition</a>
            </li>
            <li>
                <a style="margin-left: 0.5em" class="toc-item" href="#one-population">One population</a>
            </li>
            <li>
                <a style="margin-left: 1.0em" class="toc-item" href="#testing-the-model">Testing the model</a>
            </li>
            <li>
                <a style="margin-left: 1.0em" class="toc-item" href="#solving-integration-issues">Solving integration issues</a>
            </li>
            <li>
                <a style="margin-left: 0.5em" class="toc-item" href="#two-populations">Two populations</a>
            </li>
            </ul>

            <script>
                var toclist = new List("table-of-contents",
                                       {valueNames: ["toc-item"]})

                $("body").scrollspy({target: "#table-of-contents"});

                $("#table-of-contents li").on("activate.bs.scrollspy",
                    function(event) {
                        $("#table-of-contents ul").find("a").css({"font-weight": "normal"});
                        $(this).children("a").css({"font-weight": "bolder"});
                    });
            </script>
          </div>
        </div>
      </div>
    </div>

  <footer class="col-sm-8">
    <p class="muted">Last modified by Timothée Poisot on dim aoû 23 23:52:38 EDT 2015. YEAH! Generated with
    <a href="https://github.com/dcjones/Judo.jl">Judo</a>.</p>
  </footer>

  </div>
</body>
</html>
